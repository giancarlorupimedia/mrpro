<ptfm-header></ptfm-header>
<div class="row row-start">
  <div class="col-md-12 min-h-window graysoft">
    <div style="max-width: 1180px;margin: auto;margin-top: 20px;display: flex;">
      <p>Estado:</p>
      <select name="" id="" [(ngModel)]="estado" style="margin-left: 20px;">
        <option value="pendiente">Pendiente</option>
        <option value="aceptado">Aceptado</option>
      </select>
    </div>
    <section class="box-mh">
      <div class="box-mg-nano" *ngIf="estado == 'pendiente'">Se han solicitado {{ resultFilter.length }} servicio{{ resultFilter.length == 1 ? "" : "s" }}</div>

      <!-- <div class="row">
        <div class="col-md-6 mg-t-small" *ngFor="let provider of providerData">
          <div class="card card-provider">
            <div class="row no-gutters box-mg-nano">
              <div class="col-4 image-provider">
                <img src="./assets/images/user.png" class="card-img" alt="..." />
              </div>
              <div class="col-8">
                <div class="card-body">
                  <h5 class="">{{ provider.user_provider.user.name }}</h5>
                  <p class="card-text">
                  </p>
                  <p class="card-text">
                    <small class="text-muted">{{ provider.user_provider.experience }} años de experiencia</small>
                  </p>
                  <p class="card-text">
                    <small class="text-muted">Fecha de Reserva: {{ provider.date_service }}</small>
                  </p>
                  <p>Información: {{ provider.description }}</p>
                </div>
              </div>
              <div class="buttons-provider col-md-12 row row-justifycon">
                <button class="btn color-blue" (click)="ficha(myFile, provider)">Ver ficha</button>
                <button (click)="schedule(provider)" class="btn btn-danger">Cancelar</button>
              </div>
            </div>
          </div>
        </div>
      </div> -->
      <div class="content-lista-reservados" *ngIf="estado == 'aceptado'" style="margin-top: 20px;">
        <div class="card card-provider">
          <!--<div class="row no-gutters box-mg-nano" style="display: flex;flex-direction: row;text-align: left;flex-wrap: nowrap;padding: 15px 20px;">
            <div class="col-1 image-provider">
              <img src="./assets/images/user.png" class="card-img" alt="..." />
            </div>
            <div style="padding: 20px 0px 20px 20px;width: 100%;">
              <div class="" style="display: flex;justify-content: space-between;width: 100%;">
                <div class="card-body" style="padding:0;">
                  <h5 class="" style="font-size: 14px;font-weight: 600;margin-bottom: 15px;">Proveedor: <span style="font-weight: 300">Richard Solis</span></h5>
                  <h5 class="" style="font-size: 14px;font-weight: 600;margin-bottom: 15px;">Servicio de: <span style="font-weight: 300">Gasfiteria | Instalación/Reparación de baño</span></h5>
                </div>
                <div class="buttons-provider row row-justifycon" style="display: flex;flex-wrap: nowrap;padding: 0;">
                  <button class="btn color-blue" style="width:105px;background: #ff9800;color: white !important;margin-right: 10px;">Ir al Chat</button>
                  <button class="btn color-blue" style="width:105px;background: #4caf50;color: white !important;margin-right: 10px;">Finalizar</button>
                </div>
              </div>
            </div>
          </div>-->
        </div>
      </div>

      <div class="content-lista-reservados" style="display: flex;flex-direction: column-reverse;" *ngIf="estado == 'pendiente'">
        <div class="row">
          <div class="col-lg-12 col-md-12 col-sm-12">
            <table class="table table-responsive table-bordered table-hover" style="background-color: white">
            <thead>
                <tr>
                  <th scope="col"># ID</th>
                  <th scope="col">Categoria</th>
                  <th scope="col">Subcategoria</th>
                  <!--<th scope="col">Distrito</th>-->
                  <th scope="col">Dirección</th>
                  <th scope="col">Fec.Pedido</th>
                  <th scope="col">Proovedor</th>
                  <th scope="col">Acciones</th>
                </tr>
              </thead>
              <tbody *ngIf="resultFilter.length > 0">
                 <!--<tr>
                  <th scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></th>
                  <td scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></td>
                  <td scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></td>
                  <td scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></td>
                  <td scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></td>
                  <td scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></td>
                  <td scope="row"><input class="form-control mr-sm-2" type="search" placeholder="Buscar" aria-label="Search"></td>
                  <td>
                      <button class="btn btn-success my-2 my-sm-0" type="submit">Buscar</button>
                  </td>
                </tr>-->
                <tr *ngFor="let result of providerData">
                  <td scope="row">{{ result.id }}</td>
                  <td scope="row">{{ result.category_service.name }}</td>
                  <td scope="row">{{ result.parent_category.name }}</td>
                  <!--<td scope="row">{{ result.district_id }}</td>-->
                  <td scope="row">{{ result.address }}</td>
                  <td scope="row">{{ result.date_service | date: 'dd/MM/yyyy' }}</td>
                  <td scope="row">{{ result.user_provider.user.name }} {{ result.user_provider.user.lastname }}</td>
                  <td scope="row">
                    <button *ngIf="result.status_service_id == '4'" class="btn btn-warning" (click)="goChat(result.firebase_id, result.id)" style="width:92px;margin-right: 10px;">Chat</button>
                    <button (click)="schedule(result.id)" class="btn btn-danger">Cancelar</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </section>
  </div>
</div>

<ptfm-footer></ptfm-footer>

<modal #myFile>
  <modal-content>
    <div class="error text-center">
      <div class="content" style="text-align: center;display: flex;align-items: center;justify-content: space-between">
        <img src="./assets/images/user.png" class="card-img" alt="..." style="width: 200px;" />
        <div>
          <div style="margin-top: 10px; text-align: left !important;">
            <h5 style="font-weight: 600;color: #134293;font-size: 17px;">
              Nombre:
            </h5>
            <p>{{ tprovider.user_provider.user.name }} {{ tprovider.user_provider.user.lastname }}</p>
          </div>
          <div style="margin-top: 20px; text-align: left !important;">
            <h5 style="font-weight: 600;color: #134293;font-size: 17px;">
              Años de Experiencia:
            </h5>
            <p>{{ tprovider.user_provider.experience }} años</p>
          </div>
          <div style="margin-top: 20px; text-align: left !important;">
            <h5 style="font-weight: 600;color: #134293;font-size: 17px;">
              Certificaciones:
            </h5>
            <p>
              <span *ngFor="let certificate of tprovider.user_provider.certificate">{{ certificate.certificate.name }}, </span>
              <!-- {{ tprovider.user.name }} -->
            </p>
          </div>
          <!-- <div style="margin-top: 20px; text-align: left !important;">
            <h5 style="font-weight: 600;color: #134293;font-size: 17px;">
              Instituciones:
            </h5>
            <p>
              {{ tprovider.user_provider.user.name }}
            </p>
          </div> -->
          <div style="margin-top: 20px; text-align: left !important;">
            <h5 style="font-weight: 600;color: #134293;font-size: 17px;">
              Calificacion (0 - 5):
            </h5>
            <p>
              <!-- {{ tprovider.user_provider.rating }} -->
              0
            </p>
          </div>
        </div>
      </div>
    </div>
  </modal-content>
</modal>
