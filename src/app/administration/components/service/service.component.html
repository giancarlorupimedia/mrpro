<nav class="navbar navbar-expand-lg navbar-light bg-light" style="background-color: white;">
  <a class="navbar-brand">
    <b>Servicios</b>
  </a>
  <ul class="navbar-nav">
    <li class="nav-item">
      <a (click)="categoryDetail(myModal, 'Nueva Categoria CotizaciÃ³n')" class="btn blue" href="javascript:void(0)" *ngIf="flagTypeService">
        Nuevo<i class="fa fa-plus-circle" aria-hidden="true"></i>
      </a>
      <a (click)="PricedDetail(myModalP, 'Nueva Categoria Tarifado')" class="btn blue" href="javascript:void(0)" *ngIf="!flagTypeService">
        Nuevo<i class="fa fa-plus-circle" aria-hidden="true"></i>
      </a>
    </li>
  </ul>
  <form class="form-inline ml-auto" style="color: #135daa;">
    <label class="my-1 mr-2" for="inlineFormCustomSelectPref">
      <b>Tipo:</b>
    </label>
    <select class="form-control" [(ngModel)]="typeService" [ngModelOptions]="{standalone: true}" (change)="switchType()">
      <option *ngFor="let item of services" [ngValue]="item.id">{{ item.name }}</option>
    </select>
  </form>
</nav>
<div class="row">
  <div class="col-lg-12 col-md-12 col-sm-12 table-responsive" style="background-color: white" [hidden]="!flagTypeService">
    <table datatable [dtOptions]="dtOptions" [dtTrigger]="dtTrigger" class="table table-bordered table-hover">
      <thead>
        <tr>
          <th scope="col"># ID</th>
          <th scope="col">Padre</th>
          <th scope="col">Nombre</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let result of categoryList">
          <td scope="row">{{ result.id }}</td>
          <td scope="row">{{ result.parent }}</td>
          <td scope="row">{{ result.name }}</td>
          <td scope="row">
            <button type="button" (click)="categoryDetail(myModal, 'Editar Servicio', result)" class="btn btn-warning">Detalle</button>
            <button type="button" (click)="deleteCategory( result.id )" class="btn btn-danger">Eliminar</button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="ID" name="ID">
          </th>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="Padre" name="Padre">
          </th>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="Nombre" name="Nombre">
          </th>
          <th></th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div class="col-lg-12 col-md-12 col-sm-12 table-responsive" style="background-color: white" [hidden]="flagTypeService">
    <table datatable [dtOptions]="dtOptionsP" [dtTrigger]="dtTriggerP" class="table table-bordered table-hover">
      <thead>
        <tr>
          <th scope="col"># ID</th>
          <th scope="col">Padre</th>
          <th scope="col">Nombre</th>
          <th scope="col">Precio</th>
          <th scope="col">Acciones</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let result of pricedsList">
          <td scope="row">{{ result.id }}</td>
          <td scope="row">{{ result.parent }}</td>
          <td scope="row">{{ result.name }}</td>
          <td scope="row">{{ result.price }}</td>
          <td scope="row">
            <button type="button" (click)="PricedDetail(myModalP, 'Editar Servicio', result)" class="btn btn-warning">Detalle</button>
            <button type="button" (click)="deletePriced( result.id )" class="btn btn-danger">Eliminar</button>
          </td>
        </tr>
      </tbody>
      <tfoot>
        <tr>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="ID" name="ID">
          </th>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="Padre" name="Padre">
          </th>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="Nombre" name="Nombre">
          </th>
          <th scope="row">
            <input class="form-control mr-sm-2" type="text" placeholder="Precio" name="Precio">
          </th>
          <th></th>
        </tr>
      </tfoot>
    </table>
  </div>
</div>

<modal #myModal>
  <modal-content>
    <div class="row text-center">
      <h4>{{title}}</h4>
    </div>
    <form [formGroup]="categoryForm" (ngSubmit)="onSubmit(myModal)" class="col-lg-12 col-md-12">
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">Padre</label>
        <div class="col-sm-10">
          <select formControlName="parent" class="form-control">
            <option *ngFor="let item of ParentList" [value]="item.id">{{ item.name }}</option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">Nombre</label>
        <div class="col-sm-10">
          <input type="text" formControlName="name" class="form-control" placeholder="Apellido">
          <div *ngIf="submitted && categoryForm.controls.name.errors?.required">
            <p class="text-danger">
              <strong>Nombre requerido.</strong>
            </p>
          </div>
        </div>
      </div>
      <div class="form-group row" *ngIf="flagRes">
        <label class="col-lg-12 col-md-12 badge badge-warning text-wrap">
          <b>{{ message }}</b>
        </label>
      </div>
      <div class="form-group row">
        <div class="col-sm-10">
          <button type="submit" class="btn bprimary">guardar</button>
        </div>
      </div>
    </form>
  </modal-content>
</modal>

<modal #myModalP>
  <modal-content>
    <div class="row text-center">
      <h4>{{titleP}}</h4>
    </div>
    <form [formGroup]="pricedForm" (ngSubmit)="onSubmitP(myModal)" class="col-lg-12 col-md-12">
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">Padre</label>
        <div class="col-sm-10">
          <select formControlName="parent" class="form-control">
            <option *ngFor="let item of ParentPList" [value]="item.id">{{ item.name }}</option>
          </select>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">Nombre</label>
        <div class="col-sm-10">
          <input type="text" formControlName="name" class="form-control" placeholder="Apellido">
          <div *ngIf="submitted && categoryForm.controls.name.errors?.required">
            <p class="text-danger">
              <strong>Nombre requerido.</strong>
            </p>
          </div>
        </div>
      </div>
      <div class="form-group row">
        <label class="col-sm-2 col-form-label">Precio</label>
        <div class="col-sm-10">
          <input type="number" formControlName="price" class="form-control" placeholder="Apellido">
          <div *ngIf="submitted && categoryForm.controls.price.errors?.required">
            <p class="text-danger">
              <strong>Precio requerido.</strong>
            </p>
          </div>
        </div>
      </div>
      <div class="form-group row" *ngIf="flagRes">
        <label class="col-lg-12 col-md-12 badge badge-warning text-wrap">
          <b>{{ message }}</b>
        </label>
      </div>
      <div class="form-group row">
        <div class="col-sm-10">
          <button type="submit" class="btn bprimary">guardar</button>
        </div>
      </div>
    </form>
  </modal-content>
</modal>